<?xml version="1.0"?>
<robot xmlns:xacro="http://wiki.ros.org/xacro">

  <xacro:macro name="quickchanger_grippers" params="parent">
  <xacro:property name="quickchanger_grippers_visual_params" value="${xacro.load_yaml('$(find ur_description)/config/quickchanger_grippers.yaml')}"/>
  <xacro:property name="sec_mesh_files" value="${quickchanger_grippers_visual_params['mesh_files']}" scope="parent"/>
  <xacro:property name="force_abs_paths" value="true" scope="parent"/>

    <!-- gripper_link -->
    <link name="gripper_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <xacro:get_mesh name="gripper" type="visual"/>
        </geometry>
        <material name="${sec_mesh_files['gripper']['visual']['material']['name']}">
          <color rgba="${sec_mesh_files['gripper']['visual']['material']['color']}"/>
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <xacro:get_mesh name="gripper" type="collision"/>
        </geometry>
      </collision>
      <inertial>
        <mass value="1.0"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="1e-5" ixy="0" ixz="0" iyy="1e-5" iyz="0" izz="1e-5"/>
      </inertial>
    </link>

    <!-- gripper_joint -->
    <joint name="gripper_joint" type="fixed">
      <parent link="${parent}"/>
      <child link="gripper_link"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
    </joint>

    <!-- tooltip1_link -->
    <link name="tooltip1_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <xacro:get_mesh name="tooltip1" type="visual"/>
        </geometry>
        <material name="${sec_mesh_files['tooltip1']['visual']['material']['name']}">
          <color rgba="${sec_mesh_files['tooltip1']['visual']['material']['color']}"/>
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <xacro:get_mesh name="tooltip1" type="collision"/>
        </geometry>
      </collision>
      <inertial>
        <mass value="0.5"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
      </inertial>
    </link>

    <!-- tooltip1_joint -->

    <joint name="tooltip1_joint" type="prismatic">
      <parent link="gripper_link"/>
      <child link="tooltip1_link"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <axis xyz="1 0 0"/>
      <limit lower="-1.0" upper="0.041" effort="50" velocity="10"/>
    </joint>

    <!-- tooltip2 -->
    <link name="tooltip2_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <xacro:get_mesh name="tooltip2" type="visual"/>
        </geometry>
        <material name="${sec_mesh_files['tooltip2']['visual']['material']['name']}">
          <color rgba="${sec_mesh_files['tooltip2']['visual']['material']['color']}"/>
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <xacro:get_mesh name="tooltip2" type="collision"/>
        </geometry>
      </collision>
      <inertial>
        <mass value="0.5"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
      </inertial>
    </link>

    <joint name="tooltip2_joint" type="prismatic">
      <parent link="gripper_link"/>
      <child link="tooltip2_link"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <axis xyz="1 0 0"/>
      <limit lower="-1.0" upper="0.041" effort="50" velocity="10"/>
    </joint>


  </xacro:macro>
</robot>

