<?xml version="1.0"?>
<robot xmlns:xacro="http://wiki.ros.org/xacro">

  <xacro:macro name="quickchanger_grippers" params="parent">
  <xacro:property name="quickchanger_grippers_visual_params" value="${xacro.load_yaml('$(find ur_description)/config/quickchanger_grippers_visual_parameters.yaml')}"/>
  <xacro:property name="sec_mesh_files" value="${quickchanger_grippers_visual_params['mesh_files']}" scope="parent"/>
  <xacro:property name="force_abs_paths" value="true" scope="parent"/>

    <!-- quickchanger_link -->
    <link name="quickchanger_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <xacro:get_mesh name="quickchanger" type="visual"/>
        </geometry>
        <material name="${sec_mesh_files['quickchanger']['visual']['material']['name']}">
          <color rgba="${sec_mesh_files['quickchanger']['visual']['material']['color']}"/>
        </material>
      </visual>
      <inertial>
        <mass value="2.0"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="1e-5" ixy="0" ixz="0" iyy="1e-5" iyz="0" izz="1e-5"/>
      </inertial>
    </link>

    <!-- quickchanger_joint -->
    <joint name="quickchanger_joint" type="fixed">
      <parent link="${parent}"/>
      <child link="quickchanger_link"/>
      <!-- adjust quickchanger orientation to match flange orientation -->
      <origin xyz="0 0 0.012" rpy="1.57 3.14 1.57"/>
    </joint>

    <!-- suction_link -->
    <link name="suction_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <xacro:get_mesh name="suction" type="visual"/>
        </geometry>
        <material name="${sec_mesh_files['suction']['visual']['material']['name']}">
          <color rgba="${sec_mesh_files['suction']['visual']['material']['color']}"/>
        </material>
      </visual>
      <inertial>
        <mass value="1.0"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="1e-5" ixy="0" ixz="0" iyy="1e-5" iyz="0" izz="1e-5"/>
      </inertial>
    </link>

    <!-- suction_joint -->
    <joint name="suction_joint" type="fixed">
      <parent link="quickchanger_link"/>
      <child link="suction_link"/>
      <origin xyz="0.1208 0.0019 0.1088" rpy="0 0.785 0"/>
    </joint>

    <!-- tooltip_adapter_1_link -->
    <link name="tooltip_adapter_1_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <xacro:get_mesh name="tooltip_adapter_1" type="visual"/>
        </geometry>
        <material name="${sec_mesh_files['tooltip_adapter_1']['visual']['material']['name']}">
          <color rgba="${sec_mesh_files['tooltip_adapter_1']['visual']['material']['color']}"/>
        </material>
      </visual>
      <inertial>
        <mass value="0.5"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
      </inertial>
    </link>

    <!-- tooltip_adapter1_joint -->
    <joint name="tooltip_adapter1_joint" type="prismatic">
      <parent link="quickchanger_link"/>
      <child link="tooltip_adapter_1_link"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <axis xyz="0 -1 0"/>
      <limit lower="-0.041" upper="0.041" effort="50" velocity="10"/>
    </joint>

    <!-- tooltip_adapter_2_link -->
    <link name="tooltip_adapter_2_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <xacro:get_mesh name="tooltip_adapter_2" type="visual"/>
        </geometry>
        <material name="${sec_mesh_files['tooltip_adapter_2']['visual']['material']['name']}">
          <color rgba="${sec_mesh_files['tooltip_adapter_2']['visual']['material']['color']}"/>
        </material>
      </visual>
      <inertial>
        <mass value="0.5"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
      </inertial>
    </link>

    <!-- tooltip_adapter_2_joint -->
    <joint name="tooltip_adapter2_joint" type="prismatic">
      <parent link="quickchanger_link"/>
      <child link="tooltip_adapter_2_link"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <axis xyz="0 -1 0"/>
      <limit lower="-0.041" upper="0.041" effort="50" velocity="10"/>
    </joint>

    <!-- tooltip1_link -->
    <link name="tooltip1_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 1.5708"/>
        <geometry>
          <xacro:get_mesh name="tooltip1" type="visual"/>
        </geometry>
        <material name="${sec_mesh_files['tooltip1']['visual']['material']['name']}">
          <color rgba="${sec_mesh_files['tooltip1']['visual']['material']['color']}"/>
        </material>
      </visual>
      <inertial>
        <mass value="0.5"/>
        <origin xyz="0 0 0" rpy="0 0 1.5708"/>
        <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
      </inertial>
    </link>

    <!-- tooltip1_joint -->
    <joint name="tooltip1_joint" type="fixed">
      <parent link="tooltip_adapter_1_link"/>
      <child link="tooltip1_link"/>
      <origin xyz="-0.1624 0.051 0.1504" rpy="0 0 -1.5708"/>
    </joint>

    <!-- tooltip2_link -->
    <link name="tooltip2_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 1.5708"/>
        <geometry>
          <xacro:get_mesh name="tooltip2" type="visual"/>
        </geometry>
        <material name="${sec_mesh_files['tooltip2']['visual']['material']['name']}">
          <color rgba="${sec_mesh_files['tooltip2']['visual']['material']['color']}"/>
        </material>
      </visual>
      <inertial>
        <mass value="0.5"/>
        <origin xyz="0 0 0" rpy="0 0 1.5708"/>
        <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
      </inertial>
    </link>

    <!-- tooltip2_joint -->
    <joint name="tooltip2_joint" type="fixed">
      <parent link="tooltip_adapter_2_link"/>
      <child link="tooltip2_link"/>
      <origin xyz="-0.1624 -0.051 0.1504" rpy="0 0 1.5708"/>
    </joint>



  </xacro:macro>
</robot>

