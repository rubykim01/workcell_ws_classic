<?xml version='1.0' encoding='UTF-8'?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">
  <xacro:macro name="denso_robot_arm_kinematics" params="namespace model parent">

    <!-- denso base link -->
    <link name="${namespace}base_link">
      <visual>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
          <mesh filename="file://$(find denso_robot_descriptions)/robots/${model}/meshes/stl/denso_base_link.STL" scale="1 1 1"/>
        </geometry>
        <material name="">
          <color rgba="0.7 0.7 0.7 1.0"/>
        </material>
      </visual>
      <collision>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
          <mesh filename="file://$(find denso_robot_descriptions)/robots/${model}/meshes/stl/denso_base_link.STL" scale="1 1 1"/>
        </geometry>
      </collision>
      <inertial>
        <mass value="30.0"/>
        <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.15"/>
        <inertia ixx="1.2" ixy="0" ixz="0" iyy="1.2" iyz="0" izz="0.4"/>
      </inertial>
    </link>

    <joint name="${namespace}axis_joint" type="prismatic">
      <parent link="${parent}"/>
      <child link="${namespace}base_link"/>
      <origin rpy="0 0 0" xyz="0.01 0 0.084"/>
      <axis xyz="1 0 0"/>
      <limit lower="0.0" upper="0.5" effort="100" velocity="0.5" />
      <dynamics damping="0.5" friction="0.1"/>
    </joint>
    
    <link name = "${namespace}dummy_link">
      <inertial>
        <mass value="0.001"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="0.000001" ixy="0" ixz="0" iyy="0.000001" iyz="0" izz="0.000001"/>
      </inertial>
    </link>

      <!-- slider to dummy link joint -->
    <joint name="${namespace}dummy_joint" type="fixed">
      <parent link="${namespace}base_link" />
      <child link="${namespace}dummy_link" />
      <origin xyz="0 0 0" rpy="0 0 0"/>
    </joint>

    <link name="${namespace}J1">
      <visual>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
          <mesh filename="file://$(find denso_robot_descriptions)/robots/${model}/meshes/stl/denso_link1.STL" scale="1 1 1"/>
        </geometry>
        <material name="">
          <color rgba="0.7 0.7 0.7 1.0"/>
        </material>
      </visual>
      <collision>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
          <mesh filename="file://$(find denso_robot_descriptions)/robots/${model}/meshes/stl/denso_link1.STL" scale="1 1 1"/>
        </geometry>
      </collision>
      <inertial>
        <mass value="10.0"/>
        <origin rpy="0.0 0.0 0.0" xyz="0.25 0.0 0.05"/>
        <inertia ixx="0.3" ixy="0" ixz="0" iyy="0.3" iyz="0" izz="0.08"/>
      </inertial>
    </link>
    <joint name="${namespace}joint_1" type="revolute">
      <parent link="${namespace}dummy_link"/>
      <child link="${namespace}J1"/>
      <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.4135"/>
      <axis xyz="0.0 0.0 1.0"/>
      <limit effort="50" lower="-2.26892802759263" upper="2.26892802759263" velocity="3.08615226990019"/>
      <dynamics damping="0.1" friction="0.01"/>
    </joint>

    <link name="${namespace}J2">
      <visual>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
          <mesh filename="file://$(find denso_robot_descriptions)/robots/${model}/meshes/stl/denso_link2.STL" scale="1 1 1"/>
        </geometry>
        <material name="">
          <color rgba="0.7 0.7 0.7 1.0"/>
        </material>
      </visual>
      <collision>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
          <mesh filename="file://$(find denso_robot_descriptions)/robots/${model}/meshes/stl/denso_link2.STL" scale="1 1 1"/>
        </geometry>
      </collision>
      <inertial>
        <mass value="6.0"/>
        <origin rpy="0.0 0.0 0.0" xyz="0.25 0.0 0.05"/>
        <inertia ixx="0.15" ixy="0" ixz="0" iyy="0.15" iyz="0" izz="0.05"/>
      </inertial>
    </link>
    <joint name="${namespace}joint_2" type="revolute">
      <parent link="${namespace}J1"/>
      <child link="${namespace}J2"/>
      <origin rpy="0.0 0.0 0.0" xyz="0.5 0.0 0.105"/>
      <axis xyz="0.0 0.0 1.0"/>
      <limit effort="50" lower="-2.61799387799149" upper="2.61799387799149" velocity="5.41357500737341"/>
      <dynamics damping="0.1" friction="0.01"/>
    </joint>

    <link name="${namespace}J3">
      <visual>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
          <mesh filename="file://$(find denso_robot_descriptions)/robots/${model}/meshes/stl/denso_link3.STL" scale="1 1 1"/>
        </geometry>
        <material name="">
          <color rgba="0.7 0.7 0.7 1.0"/>
        </material>
      </visual>
      <collision>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
          <mesh filename="file://$(find denso_robot_descriptions)/robots/${model}/meshes/stl/denso_link3.STL" scale="1 1 1"/>
        </geometry>
      </collision>
      <inertial>
        <mass value="3.0"/>
        <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.05"/>
        <inertia ixx="0.05" ixy="0" ixz="0" iyy="0.05" iyz="0" izz="0.02"/>
      </inertial>
    </link>
    <joint name="${namespace}joint_3" type="prismatic">
      <parent link="${namespace}J2"/>
      <child link="${namespace}J3"/>
      <origin rpy="0.0 0.0 0.0" xyz="0.5 0.0 0.0862"/>
      <axis xyz="0.0 0.0 1.0"/>
      <limit effort="100" lower="-10" upper="10" velocity="1.9"/>
      <dynamics damping="0.2" friction="0.01"/>
    </joint>

    <link name="${namespace}J4">
      <visual>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
          <cylinder radius="0.02" length="0.04"/>
        </geometry>
        <material name="">
          <color rgba="0.7 0.7 0.7 1.0"/>
        </material>
      </visual>
      <collision>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
          <cylinder radius="0.02" length="0.04"/>
        </geometry>
      </collision>
      <inertial>
        <mass value="0.1"/>
        <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
        <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
      </inertial>
    </link>
    <joint name="${namespace}joint_4" type="revolute">
      <parent link="${namespace}J3"/>
      <child link="${namespace}J4"/>
      <origin rpy="0.0 0 0" xyz="0.0 0.0 -0.5207"/>
      <axis xyz="0.0 0.0 1.0"/>
      <limit effort="10" lower="-6.28318530717959" upper="6.28318530717959" velocity="25.2968981715147"/>
      <dynamics damping="0.05" friction="0.005"/>
    </joint>

    <!-- ROS-Industrial 'flange' frame - attachment point for EEF models -->
    <link name="${namespace}flange">
      <inertial>
        <mass value="0.001"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
      </inertial>
    </link>
    <joint name="${namespace}J4-flange" type="fixed">
      <parent link="${namespace}J4" />
      <child link="${namespace}flange" />
      <origin xyz="0 0 0" rpy="0 0 0" />
    </joint>

    <!-- ROS-Industrial 'tool0' frame - all-zeros tool frame -->
    <link name="${namespace}tool0">
      <inertial>
        <mass value="0.001"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
      </inertial>
    </link>
    <joint name="${namespace}flange-tool0" type="fixed">
      <!-- Denso toolframe - X+ front, Y+ right, Z+ up -->
      <origin xyz="0 0 0" rpy="3.141592 0 0"/>
      <parent link="${namespace}flange"/>
      <child link="${namespace}tool0"/>
    </joint>


  </xacro:macro>
</robot>
